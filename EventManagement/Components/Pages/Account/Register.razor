@page "/account/register"
@rendermode InteractiveServer
@inject NavigationManager Nav

<h3>Register</h3>

@if (!string.IsNullOrEmpty(error))
{
    <div class="alert alert-danger">@error</div>
}

<form method="post" action="/app-register">
    <div class="mb-2">
        <label class="form-label">Email</label>
        <input class="form-control" name="email" />
    </div>
    <div class="mb-3">
        <label class="form-label">Password</label>
        <input class="form-control" type="password" name="password" />
    </div>
    <button class="btn btn-primary" type="submit">Create account</button>
    <a class="btn btn-link" href="/account/login">Login</a>
</form>

@code {
    string? error;

    protected override void OnInitialized()
    {
        var uri = new Uri(Nav.Uri);
        var e = System.Web.HttpUtility.ParseQueryString(uri.Query).Get("e");
        if (!string.IsNullOrEmpty(e)) error = e;
    }
}
